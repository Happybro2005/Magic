<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Magic</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f4f4f9;
      text-align: center;
    }
    #container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    input, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #45a049;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>Magic Number Trick</h1>
    <div id="step"></div>
  </div>

  <script>
    let userName = "";
    let step = 0;

    function nextStep(inputValue = "") {
      const stepDiv = document.getElementById("step");

      if(step === 0){
        stepDiv.innerHTML = `
          <p>Welcome! Please enter your name:</p>
          <input id="nameInput" type="text">
          <button onclick="nextStep(document.getElementById('nameInput').value)">OK</button>
        `;
      }
      else if(step === 1){
        userName = inputValue;
        stepDiv.innerHTML = `
          <p>Hello <b>${userName}</b>! Think of a 4-digit number in your mind.<br>When ready, click OK.</p>
          <button onclick="nextStep()">OK</button>
        `;
      }
      else if(step === 2){
        stepDiv.innerHTML = `
          <p>Add the digits of your 4-digit number together.<br>When done, click OK.</p>
          <button onclick="nextStep()">OK</button>
        `;
      }
      else if(step === 3){
        stepDiv.innerHTML = `
          <p>Now substract the sum of digits value with your original 4-digit number .<br>When done, click OK.</p>
          <button onclick="nextStep()">OK</button>
        `;
      }
      else if(step === 4){
        stepDiv.innerHTML = `
          <p>Now from the result, hide any one digit and enter the remaining digits:</p>
          <input id="digitsInput" type="text" placeholder="Enter remaining digits">
          <button onclick="nextStep(document.getElementById('digitsInput').value)">Find Number</button>
        `;
      }
      else if(step === 5){
        let digits = inputValue.split('').map(Number);
        let digitSum = digits.reduce((a,b) => a+b, 0);
        let hidden = 0;

        if(digitSum < 9) hidden = 9 - digitSum;
        else if(digitSum < 18) hidden = 18 - digitSum;
        else if(digitSum < 27) hidden = 27 - digitSum;
        else if(digitSum < 36) hidden = 36 - digitSum;

        stepDiv.innerHTML = `
          <h2>✨ The Magic Result ✨</h2>
          <p>${userName}, the number you hided is: <b>${hidden}</b></p>
        `;
      }

      step++;
    }

    // Start at step 0
    nextStep();
  </script>
</body>
</html>
